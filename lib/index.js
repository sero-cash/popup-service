"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assetsWorker,types_1=require("./core/types"),PopupService=function(){function t(){this.callbackHandler=new Map,this.messageId=0,assetsWorker=new Worker("./core/service.js",{type:"module"});var o=this;assetsWorker.onmessage=function(t){var e,a=t.data;a&&"ServiceLog"===a.type?console.log("<div class='log'><span>"+a.operator+"&nbsp;&gt;</span>&nbsp;<span>"+a.content+"</span></div>"):(e=o.callbackHandler.get(a.messageId),o.callbackHandler.delete(a.messageId),e&&"function"==typeof e&&e(a))}}return t.prototype.init=function(t,e,a){var o={rpc:t,syncTime:e},s={method:types_1.Method.Init,data:o};this.handlerMsg(s,a)},t.prototype.initAccount=function(t,e){var a={method:types_1.Method.InitAccount,data:t};this.handlerMsg(a,e)},t.prototype.balanceOf=function(t,e){var a={method:types_1.Method.BalanceOf,data:t};this.handlerMsg(a,e)},t.prototype.ticketsOf=function(t,e){var a={method:types_1.Method.TicketsOf,data:t};this.handlerMsg(a,e)},t.prototype.getTxList=function(t,e){var a={method:types_1.Method.GetTxList,data:t};this.handlerMsg(a,e)},t.prototype.getTxDetail=function(t,e,a){var o={method:types_1.Method.GetTxDetail,data:{tk:t,hash:e}};this.handlerMsg(o,a)},t.prototype.getPKrIndex=function(t,e){var a={method:types_1.Method.GetPKrIndex,data:t};this.handlerMsg(a,e)},t.prototype.commitTx=function(t,e){var a={method:types_1.Method.CommitTx,data:t};this.handlerMsg(a,e)},t.prototype.getSeroPrice=function(t,e){var a={method:types_1.Method.GetPrice,data:t};this.handlerMsg(a,e)},t.prototype.clearData=function(t,e){var a={method:types_1.Method.ClearData,data:t};this.handlerMsg(a,e)},t.prototype.getSyncState=function(t,e){var a={method:types_1.Method.HealthyCheck,data:t};this.handlerMsg(a,e)},t.prototype.getPendingAndConfirming=function(t,e){var a={method:types_1.Method.GetPendingAndConfirming,data:t};this.handlerMsg(a,e)},t.prototype.handlerMsg=function(t,e){var a;e&&(a=this.messageId++,t.messageId=a,assetsWorker.postMessage(t),this.callbackHandler.set(a,e))},t}();exports.PopupService=PopupService;