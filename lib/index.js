"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assetsWorker,types_1=require("./core/types"),PopupService=function(){function e(){this.callbackHandler=new Map,this.messageId=0,assetsWorker=new Worker("./core/service.js",{type:"module"});var o=this;assetsWorker.onmessage=function(e){var t=e.data;if(t&&"ServiceLog"===t.type)console.log("<div class='log'><span>"+t.operator+"&nbsp;&gt;</span>&nbsp;<span>"+t.content+"</span></div>");else{var a=o.callbackHandler.get(t.messageId);o.callbackHandler.delete(t.messageId),a&&"function"==typeof a&&a(t)}}}return e.prototype.init=function(e,t,a){var o={rpc:e,syncTime:t},s={method:types_1.Method.Init,data:o};this.handlerMsg(s,a)},e.prototype.initAccount=function(e,t){var a={method:types_1.Method.InitAccount,data:e};this.handlerMsg(a,t)},e.prototype.balanceOf=function(e,t){var a={method:types_1.Method.BalanceOf,data:e};this.handlerMsg(a,t)},e.prototype.getTxList=function(e,t){var a={method:types_1.Method.GetTxList,data:e};this.handlerMsg(a,t)},e.prototype.getTxDetail=function(e,t,a){var o={method:types_1.Method.GetTxDetail,data:{tk:e,hash:t}};this.handlerMsg(o,a)},e.prototype.getPKrIndex=function(e,t){var a={method:types_1.Method.GetPKrIndex,data:e};this.handlerMsg(a,t)},e.prototype.commitTx=function(e,t){var a={method:types_1.Method.CommitTx,data:e};this.handlerMsg(a,t)},e.prototype.getSeroPrice=function(e,t){var a={method:types_1.Method.GetPrice,data:e};this.handlerMsg(a,t)},e.prototype.clearData=function(e,t){var a={method:types_1.Method.ClearData,data:e};this.handlerMsg(a,t)},e.prototype.getSyncState=function(e,t){var a={method:types_1.Method.HealthyCheck,data:e};this.handlerMsg(a,t)},e.prototype.handlerMsg=function(e,t){if(t){var a=this.messageId++;e.messageId=a,assetsWorker.postMessage(e),this.callbackHandler.set(a,t)}},e}();exports.PopupService=PopupService;