"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Table=function(){function t(t,e){this.name=t,this.db=e}return t.prototype.transaction=function(t){return void 0===t&&(t=!0),this.db.transaction([this.name],!0===t?"readwrite":"readonly")},t.prototype.request=function(){return this.transaction().objectStore(this.name)},t.prototype.select=function(t){var r,o,u=this;for(var e in t)o=t[r=e];return new Promise(function(e,n){var t=u.request().index(r).getAll(o);t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.result)}})},t.prototype.selectId=function(r){var o=this;return new Promise(function(e,n){var t=o.request().get(r);t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.result)}})},t.prototype.selectAll=function(){var r=this;return new Promise(function(e,n){var t=r.request().getAll();t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(t.target.result)}})},t.prototype.some=function(t,o){var e,u,s=this;for(var n in t)u=t[e=n];return new Promise(function(n,t){var r=[];s.request().index(e).openCursor(u,"prev").onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),r.length<o?e.continue():n(r)):n(r)}})},t.prototype.update=function(r){var o=this;return new Promise(function(e,n){var t=o.request().put(r);t.onsuccess=function(t){e(t)},t.onerror=function(t){n(t)}})},t.prototype.insert=function(r){var o=this;return new Promise(function(e,n){var t=o.request().add(r);t.onsuccess=function(t){e(t)},t.onerror=function(t){n(t)}})},t.prototype.delete=function(t){var c=this;return new Promise(function(s,i){c.select(t).then(function(t){t.length?t.forEach(function(t,e,n){var r=c.request(),o=r.keyPath,u=r.delete(t[o]);u.onsuccess=function(t){e===n.length-1&&s(t)},u.onerror=function(t){i(t)}}):s(!0)}).catch(function(t){i(t)})})},t.prototype.clear=function(){var r=this;return new Promise(function(e,n){var t=r.request().clear();t.onsuccess=function(t){e(t)},t.onerror=function(t){n(t)}})},t}();exports.Table=Table;